{% extends "base.html" %}

{% block content %}

    <div class="row">
        <form class="col s12" method="POST" action="{{ url_for('edit_book', book_id=book._id) }}">
            <div class="card-panel green darken-3">
                <h3 class="center-align tagline">Edit Book</h3>
                <h5 class="center-align tagline">Fill out the form below to edit this book</h5>
                <p class="center-align white-text">
                Didn't mean to edit this book? 
                <a href="{{ url_for ('library') }}" class="white-text pink darken-3 btn">Return to library</a>
                </p>
                <br>
            <!--Book Name-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_name" name="book_name" value="{{ book.book_name }}" type="text" minlength="1" maxlength="50" required>
                        <label for="book_name">Book Name</label>
                    </div>
                </div>
            <!--Author Name-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_author" name="book_author" value="{{ book.book_author }}" type="text" minlength="1" maxlength="50" required>
                        <label for="book_author">Author</label>
                    </div>
                </div>
            <!--ASIN-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_asin" name="book_asin" value="{{ book.book_asin }}" type="text" pattern="^[a-zA-Z0-9]{9,12}$" class="validate"
                        oninvalid="this.setCustomValidity('Enter ASIN. Only alphanumeric characters are accepted')"
                        oninput="this.setCustomValidity('')" minlength="9" maxlength="12" required>
                        <label for="book_asin">ISBN or ASIN number</label>
                        <span class="helper-text" data-error="wrong" data-success="right">ASIN can be found in the Product Details section on the Amazon store page for the Book.</span>
                    </div>
                </div>
            <!--Book Genre-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <select id="book_genre" name="book_genre" value="{{ book.book_genre }}" type="text" class="validate" required>
                            <option value="" disabled selected>Genre</option>
                            <option value="Crime">Crime</option>
                            <option value="Thriller">Thriller</option>
                            <option value="Fantasy">Fantasy</option>
                            <option value="Romance">Romance</option>
                            <option value="Science Fiction">Science Fiction</option>
                            <option value="Western">Western</option>
                            <option value="Inspirational">Inspirational</option>
                            <option value="Historical Fiction">Historical Fiction</option>
                            <option value="Horror">Horror</option>
                            <option value="Biography">Biography</option>
                            <option value="Drama">Drama</option>
                            <option value="Nonfiction">Nonfiction</option>
                            <option value="Poetry">Poetry</option>
                        </select>
                        <label>Select Which Genre Applies Most</label>
                    </div>
                </div>    
            <!--Book Description-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_description" name="book_description" value="{{ book.book_description }}" class="materialize-textarea" type="text" required>
                        <label for="book_description">Book Description</label>
                    </div>
                </div>
            <!--Cover Image Link-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_cover" name="book_cover" value="{{ book.book_cover }}" type="text" class="validate count" pattern="(https?:\/\/.*(?:jpg|jpeg|gif|png))" data-length="400" maxlength="400"
                        oninvalid="this.setCustomValidity('URL must begin with http(s) and end with .jpg .jpeg .png or .gif')" oninput="this.setCustomValidity('')" required>
                        <label for="book_cover">Book Cover Image URL</label>
                        <span class="helper-text" data-error="wrong" data-success="right">If you need help, locate the Amazon page for the book, right click on the cover, and select "Copy Image Address"</span>
                    </div>
                </div>
            <!--Book URL-->
                <div class="row">
                    <div class="input-field col s12 m10 offset-m1 l8 offset-l2">
                        <input id="book_url" name="book_url" value="{{ book.book_url }}" type="text" class="validate" minlength="1" maxlength="300" required>
                        <label for="book_url">Book URL</label>
                    </div>
                </div>
            <!--Submit Button-->
                <div class="row">
                    <button type="submit" class="col s8 offset-s2 btn-large pink darken-3 waves-effect waves-light btn">
                        Submit Book
                    </button>
                </div>  
            </div>
        </form>
        <div class="col card-panel green darken-3 s12 center-align">
        <!--Option for User to delete book kept in modal to stop accidental deletion-->
            <div>
                <p class="white-text">Did you want to delete this book?</p>
            <!-- Modal Trigger -->
                <a class="waves-effect waves-red pink darken-3 btn white-text modal-trigger" href="#modal2">Delete Book</a>
                <br><br>
            </div>
        <!-- Modal Structure -->
            <div id="modal2" class="modal grey darken-3">
                <div class="modal-content">
                    <h4 class="tagline">Are you sure you want to delete this book?</h4>
                    <hr>
                    <p class="tagline">Warning, there is no way to undo this action. Please choose carefully</p>
                    <br>
                    <a href="{{ url_for ('delete_book', book_id=book._id) }}" class="modal-close waves-effect waves-red pink darken-3 white-text btn">Yes, Delete book</a>
                    <a href="#!" class="modal-close waves-effect waves-green green darken-4 white-text btn">No, Keep book</a>
                </div>    
            </div>
        </div>
    </div>

{% endblock %}